# Мультиязычность в clientside_miniapps

## Обзор

Приложение clientside_miniapps теперь поддерживает мультиязычность с казахским (kk) и русским (ru) языками. По умолчанию используется казахский язык.

## Структура

### Файлы конфигурации

- **src/i18n-config.ts** - конфигурация локализации
- **src/i18n.ts** - функция для получения словарей
- **src/dictionaries/kk.json** - казахские переводы
- **src/dictionaries/ru.json** - русские переводы

### Контекст

- **src/contexts/language-context.tsx** - React контекст для управления языком

### Компоненты

- **src/ui/components/language-switcher.tsx** - переключатель языка в навбаре

## Использование

### В компонентах

```tsx
import { useLanguage } from "~/contexts/language-context";

export function MyComponent() {
  const { t, locale, setLocale } = useLanguage();

  return (
    <div>
      <h1>{t("home.title")}</h1>
      <p>{t("home.subtitle")}</p>
    </div>
  );
}
```

### Функция перевода

Функция `t()` принимает ключ в формате "category.key":

```tsx
t("common.home")      // "Басты бет" (kk) или "Главная" (ru)
t("cart.title")       // "Себет" (kk) или "Корзина" (ru)
t("nav.stores")       // "Мекемелер" (kk) или "Заведения" (ru)
```

### Смена языка

```tsx
const { setLocale } = useLanguage();

// Переключить на русский
setLocale("ru");

// Переключить на казахский
setLocale("kk");
```

## Добавление новых переводов

1. Откройте файлы `src/dictionaries/kk.json` и `src/dictionaries/ru.json`
2. Добавьте новые ключи в обе файлы:

**kk.json:**
```json
{
  "mySection": {
    "myKey": "Менің мәтінім"
  }
}
```

**ru.json:**
```json
{
  "mySection": {
    "myKey": "Мой текст"
  }
}
```

3. Используйте в коде:
```tsx
t("mySection.myKey")
```

## Структура словарей

Словари организованы по разделам:

- **common** - общие элементы (кнопки, действия)
- **header** - заголовок приложения
- **seo** - SEO метаданные и маркетинговые тексты
  - `description` - описание приложения
  - `tagline` - "Еда со скидкой до 80% — рядом с вами"
  - `taglineKk` - "80% дейін жеңілдікпен тамақтану - қасыңызда"
  - `noDelivery` - "Забирай заказ без доставки — быстро и бесплатно" / "Тапсырысты жеткізусіз алыңыз - жылдам және тегін"
  - `support247` - "24/7 қолдау" / "Поддержка 24/7"
  - `saveUpTo` - "Экономь до 80% на свежей еде" / "80% дейін жаңа тамаққа үнемдеңіз"
- **nav** - навигация
- **home** - главная страница
- **stores** - заведения
- **products** - продукты
- **orders** - заказы
- **cart** - корзина
- **auth** - аутентификация
- **profile** - профиль
- **footer** - футер
- **language** - названия языков

## Переключатель языка

Переключатель языка находится в правом верхнем углу навбара (Header). Он отображает иконку глобуса с выпадающим меню для выбора языка.

## Сохранение выбранного языка

Выбранный язык сохраняется в localStorage и автоматически восстанавливается при следующем посещении.

## API для загрузки словарей

Словари загружаются через API endpoint:
- **GET /api/dictionary?locale=kk** - получить казахский словарь
- **GET /api/dictionary?locale=ru** - получить русский словарь

## Примеры использования

### В компоненте навигации

```tsx
const navItems = [
  { name: t("nav.home"), url: "/" },
  { name: t("nav.stores"), url: "/stores" },
  { name: t("nav.orders"), url: "/orders" },
];
```

### В корзине

```tsx
<Button>{t("cart.checkout")}</Button>
<p>{t("cart.emptyCart")}</p>
```

### В футере

```tsx
<h3>{t("footer.about")}</h3>
<Link href="/privacy">{t("footer.privacy")}</Link>
```

## Примечания

- По умолчанию используется казахский язык (kk)
- Если перевод не найден, функция `t()` возвращает сам ключ
- Язык сохраняется в localStorage под ключом "locale"
- Словари загружаются динамически при смене языка
